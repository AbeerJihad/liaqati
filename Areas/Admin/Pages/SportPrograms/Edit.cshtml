@page
@model liaqati_master.Pages.Programs.EditProgramModel
@{
}

<h4 class="text-center">تعديل البرنامج الرياضي</h4>
<hr />
@*<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <div class="card">
                <div class="card-body">
                    <form asp-page-handler="Add" method="post" class="form theme-form">
                        @*     <div asp-validation-summary="All">

                        </div>*@
@*
                        <input hidden asp-for="SportsProgram.Id"/>
                        <div class="row">
                            <div class="col">
                                <div class="mb-3">
                                    <label asp-for="SportsProgram.Services!.Title"></label>
                                    <input asp-for="SportsProgram.Services!.Title" class="form-control" placeholder="">

                                </div>
                            </div>
                            <div class="col">
                                <div class="mb-3">
                                    <label asp-for="SportsProgram.Services!.Price"></label>
                                    <input asp-for="SportsProgram.Services!.Price" class="form-control" placeholder="">
                                </div>
                            </div>

                            <div class="col-12">
                                <div class="mb-3">
                                    <label asp-for="SportsProgram.Services!.Description"></label>
                                    <input asp-for="SportsProgram.Services!.Description" class="form-control" placeholder="">
                                </div>
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="mb-3">
                                    <label asp-for="SportsProgram.Length"></label>
                                    <input asp-for="SportsProgram.Length" class="form-control" placeholder="">
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="mb-3">
                                    <label asp-for="SportsProgram.Difficulty"></label>
                                    <input asp-for="SportsProgram.Difficulty" class="form-control" placeholder="">
                                </div>
                            </div>

                            <div class="col-sm-4">
                                <div class="mb-3">
                                    <label asp-for="SportsProgram.BodyFocus"></label>
                                    <input asp-for="SportsProgram.BodyFocus" class="form-control" placeholder="">
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="mb-3">
                                    <label asp-for="SportsProgram.TrainingType"></label>
                                    <input asp-for="SportsProgram.TrainingType" class="form-control" placeholder="">
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="mb-3">
                                    <label asp-for="SportsProgram.Services!.Category!.Name"></label>
                                    <select asp-for="SportsProgram.Services!.Category!.Id" asp-items="Model.CatogeryName">
                                        <option disabled value="-1">Please Select Catogery Name</option>

                                    </select>
                                </div>
                            </div>
                        </div>
                        @for (int i = 0; i < Model.SportsProgram.Exercies_Programs?.Count; i++)
                        {

                                <div id="rowExerciesForm" class="row">
                                <input hidden asp-for="SportsProgram.Exercies_Programs![i].Id" placeholder="اي يوم من الايام" />
                                <input hidden asp-for="SportsProgram.Exercies_Programs![i].sportsProgramId" placeholder="اي يوم من الايام" />


                                    <div>Test</div>
                                    <div class="col">
                                        <input asp-for="SportsProgram.Exercies_Programs![i].Day" placeholder="اي يوم من الايام" />
                                    </div>
                                    <div class="col">
                                        <input asp-for="SportsProgram.Exercies_Programs![i].Week" placeholder="اي اسبوع من الاسابيع" />
                                   </div>
                                    <div class="col">
                                    <select id="selExForm" asp-items="Model.ExerciesName" asp-for="SportsProgram.Exercies_Programs![i].exerciseId" placeholder="التمرين الخاص باليوم">
                                        </select>
                                    </div>
                                </div>
                        }



                        <div class="row">
                            <div class="col-sm-4">
                                <div class="mb-3">
                                    <button class="mx-auto col-auto" type="submit"> Save </button>
                                </div>
                            </div>
                        </div>
*@


@* <div class="row">
                        <div class="col-sm-4">
                        <div class="mb-3">
                        <label>Project Size</label>
                        <select class="form-select">
                        <option>Small</option>
                        <option>Medium</option>
                        <option>Big</option>
                        </select>
                        </div>
                        </div>
                        <div class="col-sm-4">
                        <div class="mb-3">
                        <label>Starting date</label>
                        <input class="datepicker-here form-control" type="text" data-language="en">
                        </div>
                        </div>
                        <div class="col-sm-4">
                        <div class="mb-3">
                        <label>Ending date</label>
                        <input class="datepicker-here form-control" type="text" data-language="en">
                        </div>
                        </div>
                        </div>
                        <div class="row">
                        <div class="col">
                        <div class="mb-3">
                        <label>Enter some Details</label>
                        <textarea class="form-control" id="exampleFormControlTextarea4" rows="3"></textarea>
                        </div>
                        </div>
                        </div>
                        <div class="row">
                        <div class="col">
                        <div class="mb-3">
                        <label>Upload project file</label>
                        <form class="dropzone dz-clickable " id="singleFileUpload">
                        <div class="dz-message needsclick">
                        <i class="icon-cloud-up"></i>
                        <h6>Drop files here or click to upload.</h6><span class="note needsclick">(This is just a demo dropzone. Selected files are <strong>not</strong> actually uploaded.)</span>
                        </div>

                        </form>
                        </div>
                        </div>
                        </div>
                        <div class="row">
                        <div class="col">
                        <div class="text-end"><a class="btn btn-secondary me-3" href="#">Add</a><a class="btn btn-danger" href="#">Cancel</a></div>
                        </div>
                        </div>
                        *@
@*

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
*@

<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <div class="card">
                <div class="card-body">
                    <form id="FormProgramAdd" asp-page-handler="Add" method="post" class="form theme-form">

                        <input name="Id" value="@Model.SportsProgram.Id" id="IdProg" asp-for="SportsProgram.Id" hidden />

                        <div class="row">
                            <div class="col-12 col-md-6">
                                <div class="mb-3">
                                    <label asp-for="SportsProgram.Services!.Title"></label>
                                    <input asp-for="SportsProgram.Services!.Title" class="form-control" placeholder="">
                                    <span class="text-danger" asp-validation-for="SportsProgram.Services!.Title"></span>
                                </div>
                            </div>
                            <div class="col-12 col-md-6">
                                <div class="mb-3">
                                    <label asp-for="SportsProgram.Services!.Price"></label>
                                    <input asp-for="SportsProgram.Services!.Price" class="form-control" placeholder="">
                                    <span class="text-danger" asp-validation-for="SportsProgram.Services!.Price"></span>

                                </div>
                            </div>

                            <div class="col-12">
                                <div class="mb-3">
                                    <label asp-for="SportsProgram.Services!.Description"></label>
                                    <input asp-for="SportsProgram.Services!.Description" class="form-control" placeholder="">
                                    <span class="text-danger" asp-validation-for="SportsProgram.Services!.Description"></span>

                                </div>
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-12 col-md-4  ">
                                <div class="mb-3">
                                    <label asp-for="SportsProgram.TrainingType"></label>
                                    <input asp-for="SportsProgram.TrainingType" class="form-control" placeholder="">
                                    <span class="text-danger" asp-validation-for="SportsProgram.TrainingType"></span>

                                </div>
                            </div>

                            <div class="col-12 col-md-4">
                                <div class="mb-3">
                                    <label asp-for="SportsProgram.Difficulty"></label>
                                    <input asp-for="SportsProgram.Difficulty" class="form-control" placeholder="">
                                    <span class="text-danger" asp-validation-for="SportsProgram.Difficulty"></span>

                                </div>
                            </div>

                            <div class="col-12 col-md-4">
                                <div class="mb-3">
                                    <label asp-for="SportsProgram.BodyFocus"></label>
                                    <input asp-for="SportsProgram.BodyFocus" class="form-control" placeholder="">
                                    <span class="text-danger" asp-validation-for="SportsProgram.BodyFocus"></span>

                                </div>
                            </div>


                        </div>
                        <div class="row">
                            <div class="col-12 col-md-6">
                                <div class="mb-3">
                                    <label class="d-block" asp-for="SportsProgram.Length"></label>
                                    <select style="height:35px;" class="col-12 border border-light rounded-3" id="selectLength" asp-for="SportsProgram.Length">
                                        <option value="-1">ادخل عدد اسابيع النظام الرياضي</option>
                                        <option value="1">اسبوع</option>
                                        <option value="2">اسبوعين</option>
                                        <option value="4">  اربعة اسابيع</option>
                                    </select>
                                    <span class="text-danger" asp-validation-for="SportsProgram.Length"></span>

                                </div>
                            </div>

                            <div class="col-12 col-md-6">
                                <div class="mb-3">
                                    <label class="d-block" asp-for="SportsProgram.Services!.Category!.Name"></label>
                                    <select style="height:35px;" class="col-12 border border-light rounded-3" asp-for="SportsProgram.Services!.Category!.Id" asp-items="Model.CatogeryName">
                                        <option value="-1"> ادخل اسم الصنف الخاص بالنظام الرياضي</option>

                                    </select>
                                    <span class="text-danger" asp-validation-for="SportsProgram.Services!.CategoryId"></span>

                                </div>
                            </div>


                        </div>


                        <div>
                            @{
                                if (Model.SportsProgram.Exercies_Programs != null)
                                {
                                    <table class="table table-striped table-hover table-bordered table-responsive">
                                        <thead class="table-Secondary">
                                            <tr>

                                                <th scope="col">الاسبوع</th>
                                                <th scope="col">اليوم</th>
                                                <th scope="col"> اسم التمرين</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tableBodyApi">



                                            @for (int x = 0; x < Model.SportsProgram.Exercies_Programs!.Count; x++)
                                            {

                                                string id = @Model.SportsProgram.Exercies_Programs[x].ExerciseId;
                                                Exercise exercise = @Model.getExercise(id);

                                                <tr>
                                                    <td>@Model.SportsProgram.Exercies_Programs[x].Week   الاسبوع</td>
                                                    <td>@Model.SportsProgram.Exercies_Programs[x].Day  اليوم </td>
                                                    <td>@exercise.Title</td>

                                                    <td>
                                                        @{
                                                            var item = @Model.SportsProgram.Exercies_Programs[x];
                                                            item.SportsProgram = null;
                                                            item.Exercise = null;
                                                        }
                                                        <a class="btn" onclick="ShowProgExerModelEdit('editProgExerModel',@System.Text.Json.JsonSerializer.Serialize(item))"
                                                           style="background-color: #8763b320; color:#3c077d;   padding: 0.375rem 0.75rem;">
                                                            <i class="bi bi-pencil-square"></i>
                                                        </a>

                                                    </td>

                                                    <td>
                                                        <form method="post" asp-page-handler="DeleteProgExer" asp-route-id="@Model.SportsProgram.Exercies_Programs[x].Id">
                                                            <button hidden type="submit"></button>
                                                            <a onclick="DeleteFun(this)" style=" background-color: #d22d3d20; color:#d22d3d;padding: 0.375rem 0.75rem;"> <i class="bi bi-trash"></i> </a>



                                                        </form>


                                                    </td>

                                                </tr>

                                            }
                                            }




                                        </tbody>
                                    </table>


                                }



                            }
                        </div>






                        <div class="row my-3">
                            <div class="col-4 mx-auto">
                                <div class="mb-3">
                                    <a style="margin-right:35%" onclick="SaveProg(this)" id="btnSave" class="btn btn-secondary"> Save </a>
                                </div>
                            </div>
                        </div>











                        @*   <div class="row">
                        <div class="col-sm-4">
                        <div class="mb-3">
                        <label> اختر التمارين الخاصة بالنظام الرياضي</label>
                        <select id="SelectExercise" aria-label="Default select example" class="js-example-rtl " multiple="multiple">
                        </select>


                        </div>
                        </div>
                        </div>

                        *@





                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="editProgExerModel" tabindex="-1" aria-labelledby="editLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editLabel">Edit </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="frmCRUD" method="post">
                <div class="modal-body">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <input asp-for="Exercies_program.Id" id="ExerciesprogramID" hidden />
                    <input asp-for="Exercies_program.SportsProgramId" id="Exercies_ProgramsportsProgramId" hidden />

                    <div class="form-group">
                        <div class="mb-3">
                            <label class="d-block"> اختر اليوم</label>
                            <select asp-for="Exercies_program.Day" style="height:35px;" class="col-12 border border-light rounded-3" id="selectDays"
                                    placeholder="اكتب شيئاً...">
                                <option value="1">اليوم الاول</option>
                                <option value="2">اليوم الثاني</option>
                                <option value="3">اليوم الثالث</option>
                                <option value="4">اليوم الرابع</option>
                                <option value="5">اليوم الخامس</option>
                                <option value="6">اليوم السادس</option>
                                <option value="7">اليوم السابع</option>
                            </select>

                        </div>
                    </div>
                    <div class="form-group">
                        <div class="mb-3">
                            <label class="d-block" asp-for="Exercies_program.Week"></label>
                            <select style="height:35px;" class="col-12 border border-light rounded-3" id="selectLength" asp-for="Exercies_program.Week">
                                <option value="-1">ادخل عدد اسابيع النظام الرياضي</option>
                                <option value="1">  الاسبوع الاول</option>
                                <option value="2">الاسيوع الثاني</option>
                                <option value="3">   الاسيوع الثالث</option>
                                <option value="4">  الاسيوع الرابع </option>
                            </select>
                            <span class="text-danger" asp-validation-for="SportsProgram.Length"></span>

                        </div>
                    </div>


                    <div class="form-group">
                        <div class="mb-3">
                            <label class="d-block"> اختر التمارين الخاصة بالنظام الرياضي</label>
                            <select id="Exercie" asp-items="Model.ExerciesName" asp-for="Exercies_program.ExerciseId" style="height:35px;" class="col-12 border border-light rounded-3">
                                <option value="-1"> اختر التمارين</option>
                            </select>
                        </div>
                    </div>


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button id="ptnadd" type="submit" class="btn btn-primary" asp-page-handler="EditProgExer">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>


<div>
    <a asp-page="Index">Back to List</a>
</div>



@section Scripts {
    @*    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
*@
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="~/javascript/script.js"></script>
    <script src="~/javascript/programs.js"></script>
    <script src="~/jsapi/exerciseapi.js"></script>

}
